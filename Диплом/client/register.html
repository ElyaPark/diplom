<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Регистрация</title>
  <link rel="stylesheet" href="style1.css">
</head>
<body>
  <div class="container">
    <div class="header">
        
        <div class="flag">
            <img src="/img/KR.png">
        </div>
        <div class="fire">
            <span>
                <img src="/img/Fire.png"></span>
        </div>
        <div class="level" id="profile-level">13</div>
        <div class="name">MINJI</div>
        <div class="profile-containeer">
            <button class="profile-button" id="profileButton">
                <span><a href="profile.html" class="profileButton"><img src="/img/profile.png"></span> 
            </button>
        </a>
        </div>
            <div class="menu-container">
                <button class="menu-button" id="menuButton">
                    <span><img src="/img/more-square.png"></span> 
                </button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <ul>
                        <li><a href="index.html" class="menu-item"><img src="/img/home-2.png"></a></li>
                        <li><a href="book.html" class="menu-item"><img src="/img/book.png"></a></li>
                        <li><a href="message.html"><img src="/img/message.png"></a></li>
                        
                        <li><a href="setting.html"><img src="/img/setting.png"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
<div class="auth-panel">
  <div class="auth-panel2">
    <h2>Регистрация</h2>
    <form id="registerForm">
      <label>Имя:</label>
      <input type="text" id="username" placeholder="Введите имя" required>
      <label>Email:</label>
      <input type="email" id="email" placeholder="Введите email" required>
      <label>Пароль:</label>
      <input type="password" id="password" placeholder="Введите пароль" required>
      <button type="submit" class="button register-btn">Зарегистрироваться</button>
      <a href="login.html" class="button switch-btn">Уже есть аккаунт?</a>
    </form>
  </div>
</div>
<script>
document.getElementById("registerForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const username = document.getElementById("username").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  const res = await fetch("/api/auth/register", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ username, email, password })
  });

  const data = await res.json();
  if (res.ok) {
    alert("Регистрация прошла успешно");
    location.href = "login.html";
  } else {
    alert(data.message || "Ошибка регистрации");
  }
});

const menuButton = document.getElementById('menuButton');
const dropdownMenu = document.getElementById('dropdownMenu');

if (menuButton && dropdownMenu) {
    menuButton.addEventListener('click', () => {
        dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
    });
} else {
    console.error("Кнопка меню или выпадающее меню не найдены!");
}
</script>
<script src="script.js"></script>
</body>
</html>
